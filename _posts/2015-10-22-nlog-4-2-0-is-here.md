---
layout: post
title: NLog 4.2.0 is here!
---

NLog 4.2.0 has been released. This release contains some small features and (important) bug fixes.

We take semver serious, so all changes are backwards-compatible. 

##Features

- Performance Counter Target: it's now possible to configure the value to increment for the counter. This was before always 1.
- Mail Target: pickup directory can be configured from the NLog config.
- Cached Layout Renderer: a `clearCache` option has been added for more control when to clear the cache. See [wiki](https://github.com/NLog/NLog/wiki/Cached-Layout-Renderer). 


##Bug fixes

###Inner layout can now contain colons
An inner layout can now contain colons, but it needs an escape.

We need to escape `:` and `}` in an inner layout because: 

- `:` because it's a value separator. `${when:when=1 == 1:Inner=Test\: Hello}`
- `}` because it's it can be the end of another layout renderer when double nested.  `${rot13:inner=${rot13:inner=${when:when=1 == 1:Inner=Test \} Hello}}}`


###Other bugfixes

- Mail Target: when `useSystemNetMailSettings` was `false`, still some settings were used from the `<mailSettings>` from the .Net config.
- Removed unneeded System.Drawing references for Xamarin.
- File Target: Sometimes exception is thrown when archiving is enabled.
- File Target: file archiving DateAndSequence & FileArchivePeriod.Day won't work always.
- GetTargetsByLevelForLogger could throw a "Collection was modified" exception. 


##No bug nor feature

The documentation and error messages of the `Getcurrentclasslogger` and `GetLogger` are when passing a `type`. 
The `type` should be inherit from `Logger`, and threw a really confusing error when it was not. 
Note that the `type` argument is only needed when using custom Loggers. Most of the time it isn't needed to pass a type to those methods.

Also we improved other docs and internal logging in the code.
